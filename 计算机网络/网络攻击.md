## **什么是 DDoS 攻击？如何防范？**

分布式拒绝服务（DDoS）攻击是通过大规模互联网流量淹没目标服务器或其周边基础设施，以破坏目标服务器、服务或网络正常流量的恶意行为。

DDoS 攻击是通过连接互联网的计算机网络进行的。这些网络由计算机和其他设备（例如 IoT 设备）组成，它们可能感染了恶意软件，从而被攻击者远程控制。这些个体设备称为机器人（或“僵尸”），一组机器人则称为僵尸网络。

一旦建立了僵尸网络，攻击者就可以通过向每个机器人发送远程指令来发动攻击。当僵尸网络将受害者的服务器或网络作为目标时，每个机器都会将请求发送到目标的 IP 地址，这可能导致服务器或网络不堪重负，从而造成对正常流量的拒绝服务。由于每个机器都是合法的互联网设备，因而可能很难区分攻击流量与正常流量。

![[dDos.webp]]

### **常见的 DDoS 攻击类型**
1. **网络层攻击**
    - 典型攻击类型：UDP 反射攻击，例如 NTP Flood 攻击。
    - 这类攻击主要利用大流量拥塞攻击者的网络带宽，导致其业务无法正常响应访问。
2. **传输层攻击**
    - 典型攻击类型：SYN Flood 攻击、连续数据攻击等。
    - 这些攻击通过占用服务器的连接资源从而达到拒绝服务的目的。
3. **会话层攻击**
    - 典型攻击类型：SSL 连接攻击。
    - 这类攻击占用服务器的 SSL 会话资源从而导致拒绝服务。
4. **应用层攻击**
    - 典型攻击类型：DNS Flood 攻击、HTTP Flood 攻击、游戏假人攻击等。
    - 这类攻击占用服务器的应用处理资源极大的消耗服务器资源，从而达到拒绝服务的目的。

### **如何防范 DDoS 攻击？**

1. **增强网络基础设施**
    - 提升网络带宽，增加服务器的处理能力和承载能力，通过增强基础设施的能力来抵御攻击。
2. **使用防火墙和入侵检测系统**
    - 配置防火墙规则，限制不必要的网络流量，阻止来自可疑 IP 地址的流量。
    - 入侵检测系统可以帮助及时发现和响应 DDoS 攻击。
3. **流量清洗和负载均衡**
    - 使用专业的 DDoS 防护服务提供商，通过流量清洗技术过滤掉恶意流量，将合法流量导向正常服务器。
    - 负载均衡可以将流量均匀分发到多个服务器上，减轻单一服务器的压力。
4. **配置访问控制策略**
    - 限制特定 IP 地址或段的访问。
    - 设定访问频率限制，防止过多请求集中在单个 IP 上。


---

## **SQL 注入**

SQL 注入发生在当应用程序直接使用用户提供的输入作为 SQL 查询的一部分时。当用户输入被错误地用作数据库查询的一部分，而应用程序没有对其进行适当的验证和转义，就可能会发生 SQL 注入。

例如，如果一个用户输入了一个字符串来查找特定用户的信息，但应用程序将此用户输入直接用作 SQL 查询的一部分（例如，作为 SELECT 语句的一部分），而不考虑可能的安全问题，那么攻击者可能会利用这一点来执行他们自己的恶意 SQL 查询。


### **如何防范 SQL 注入？**
解决 SQL 注入问题的方法主要有以下几种：

#### **1. 输入验证和转义**
在将用户输入用作 SQL 查询的一部分之前，对输入进行验证和转义。
- 确保输入符合预期格式。
- 防止任何可能导致 SQL 注入的特殊字符。
### **2. 使用参数化查询**
- **使用参数化查询**可以避免直接将用户输入嵌入到 SQL 查询中。
- 预定义的变量不直接接收用户输入，而是交给数据库引擎处理，而不是直接拼接 SQL 语句。
- 这样可以防止 SQL 注入攻击。
示例（Python + MySQL）：
```python
cursor.execute("SELECT * FROM users WHERE username = %s", (username,))
```

### **3. 限制数据库权限**
- 限制数据库用户的权限，只授予它们执行所需操作的最小权限。
- 避免使用高权限账户进行数据库操作。
- 限制数据库用户的权限可以减少被攻击后造成的危害。

### **4. 实施输入过滤**
- 在某些情况下，**实施输入过滤**可以进一步减少 SQL 注入的风险。
- 这可能涉及检查和过滤用户输入中的特殊字符和 SQL 关键字，以排除可能的恶意输入。


---


## **CSRF 攻击是什么？**

CSRF（跨站请求伪造）是一种攻击手段，攻击者通过诱导用户执行恶意操作，从而获取用户数据或执行恶意代码。CSRF 攻击通常通过**伪造一个合法的 HTTP 请求**来实现，这个请求看起来是合法的，但实际上是为**执行攻击者控制的操作**。

---

## **如何防范 CSRF 攻击？**

解决 CSRF 攻击的方法主要有以下几种：
### **1. 验证用户会话**
- 在服务器端对用户会话进行验证，确保请求的会话标识符与当前会话标识符匹配。
- 这样可以防止攻击者伪造会话标识符。

### **2. 使用双重验证**
- 除了会话验证，还可以使用其他验证方式，例如：
    - **验证码（CAPTCHA）**：要求用户手动输入验证码，确保请求是用户主动发起的。
    - **签名验证**：在请求中附加一个唯一的签名或令牌，服务器验证签名的正确性。
- 这些验证方式可以增加攻击难度。

### **3. 防止跨站请求**
- 通过**设置 CSP（内容安全策略）** 来防止跨站请求。
- 限制网页中可执行的脚本来源，减少攻击者诱导用户执行恶意操作的可能性。

### **4. 避免表单自动提交**
- 禁用默认情况下的自动提交功能。
- 要求用户在提交表单前确认操作，防止攻击者诱导用户提交未授权的请求。

### **5. 强制检查 Referer 头部**
-  **Referer 头部（Referer Header）** 是 HTTP 请求头的一部分，包含了请求来源的 URL。
- 服务器可以检查请求的 Referer 头部，确保请求来源可信，避免跨站请求。
- 例如，如果请求应当来自 `example.com`，但 Referer 显示为 `malicious-site.com`，服务器可以拒绝该请求。

### **6. 限制 Cookie 作用域**
- 通过浏览器设置 Cookie 的 `SameSite` 属性，防止 Cookie 在跨域请求时被携带。
	- `SameSite=Strict`：禁止所有跨站请求携带 Cookie。
	- `SameSite=Lax`：允许部分跨站请求（如 GET 请求）。
	- `SameSite=None; Secure`：允许跨站请求，但要求使用 HTTPS。
	- 这种方法可以有效防止 CSRF 攻击，因为攻击者在跨站环境下无法获取用户的身份凭据。


---



## **XSS 攻击是什么？**

XSS（跨站脚本攻击）是一种攻击方式，攻击者通过在 Web 页面中插入恶意脚本代码，然后诱导用户访问该页面，从而使得恶意脚本在用户浏览器中执行。
这种攻击可以用于窃取用户信息、会话凭证、敏感数据，甚至可以控制用户的账户。

### **XSS 攻击的分类**

XSS 攻击主要分为 **存储型（持久型）**、**反射型（非持久型）** 和 **DOM 型**。
#### **1. 存储型 XSS**
- 注入型脚本永久存储在目标服务器上。
- 当浏览器请求数据时，脚本会从服务器上返回并执行。
- **示例**：攻击者在留言板、评论区等存入恶意 JavaScript 代码，其他用户访问时就会触发该代码。

#### **2. 反射型 XSS**
- 当用户点击恶意链接、提交表单、进入恶意网站时，恶意脚本会进入 URL 或请求参数，并立即被 Web 服务器返回并执行。
- 由于浏览器认为此内容来自“可信任的服务器”，所以会执行攻击代码。
- **示例**：攻击者发送带有恶意 JavaScript 的 URL，用户访问该链接后，浏览器会执行其中的恶意代码。

### **3. DOM 型 XSS**
- 通过修改原有的客户端代码，使得攻击者可以操控浏览器的 DOM 环境，导致 JavaScript 代码被恶意执行。
- **示例**：攻击者利用 JavaScript 操作 DOM，将用户输入直接插入页面，导致恶意代码执行。

### **如何防范 XSS 攻击？**

为了防止 XSS 攻击，可以采取以下安全措施：
#### **1. 输入验证**
- 对所有用户输入的数据进行**有效性验证**，过滤或转义特殊字符。
- 例如，禁止用户输入 HTML 标签、JavaScript 代码。

#### **2. 输出编码**

- 在网页显示用户输入内容时，使用适当的**编码方式**，如 **HTML 转义、URL 编码**，防止恶意脚本注入。
- **示例**（HTML 转义）：
    ```
    &lt;script&gt;alert('XSS')&lt;/script&gt;
    ```
    浏览器不会解析这段代码，而是直接显示它。

#### **3. 使用 Content Security Policy（CSP）**

- 通过设置 CSP 限制网页中可执行的脚本来源。
- 例如，**只允许加载来自自身域名的 JavaScript 文件**，禁止执行内联脚本：
    ```
    Content-Security-Policy: script-src 'self'; object-src 'none';
    ```

#### **4. 使用 HttpOnly Cookie**
- 在 Cookie 配置 `HttpOnly` 标记，使其无法被 JavaScript 代码读取，从而减少 XSS 窃取会话信息的可能性。
- **示例**（在服务器端设置 Cookie）：
    ```
    Set-Cookie: sessionId=abc123; HttpOnly; Secure
    ```

### **总结**

✅ **XSS 攻击通过注入恶意脚本在浏览器端执行，可能导致信息泄露、账户被劫持等问题。**  
✅ **存储型 XSS 存在于服务器数据库，反射型 XSS 依赖用户操作，DOM XSS 修改网页环境。**  
✅ **防范 XSS 需要结合输入验证、输出编码、CSP 策略、HttpOnly Cookie 等手段。**

通过这些安全措施，可以有效降低 XSS 攻击的风险，提高 Web 应用的安全性。