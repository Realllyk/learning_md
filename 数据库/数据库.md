## 事务的四大特性
事务需要满足 **ACID** 原则：
- **A（Atomicity，原子性）**：事务中的操作要么全部成功，要么全部失败。
- **C（Consistency，一致性）**：事务执行前后，数据库保持一致状态。
- **I（Isolation，隔离性）**：多个事务互相隔离，避免影响。
- **D（Durability，持久性）**：事务一旦提交，数据永久存储。


## 事务隔离级别
### **并发事务可能遇到的问题**

| 并发问题                           | 描述                                            |
| ------------------------------ | --------------------------------------------- |
| **脏读（Dirty Read）**             | 读取到**未提交事务**的数据，可能回滚，导致数据不一致。                 |
| **不可重复读（Non-Repeatable Read）** | **同一事务内，两次读取同一数据**，但另一个事务修改了该数据，导致两次读取结果不同。   |
| **幻读（Phantom Read）**           | **同一事务内，两次查询同一范围的数据**，但另一个事务插入了新数据，导致数据条数不一致。 |

### **数据库的四种隔离级别**

|   |   |   |   |   |
|---|---|---|---|---|
|**隔离级别**|**脏读**|**不可重复读**|**幻读**|**性能**|
|**读未提交（Read Uncommitted）**|✅ 可能|✅ 可能|✅ 可能|🚀🚀🚀🚀🚀（最高）|
|**读已提交（Read Committed）**|❌ 避免|✅ 可能|✅ 可能|🚀🚀🚀🚀（较高）|
|**可重复读（Repeatable Read）**|❌ 避免|❌ 避免|✅ 可能|🚀🚀🚀（一般）|
|**可串行化（Serializable）**|❌ 避免|❌ 避免|❌ 避免|🚀（最低）|

## **事务隔离级别详情**

### **4.1 读未提交（Read Uncommitted）**
- **特点**：允许读取**未提交的数据**，可能会出现**脏读**。
- **可能问题**：
    - ✅ 可能发生 **脏读、不可重复读、幻读**。
- **适用场景**：低一致性需求（如日志记录）。
- **SQL 语法**：
    ```mysql
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
    ```

### **4.2 读已提交（Read Committed）**

- **特点**：只允许读取**已提交的数据**，避免**脏读**。
- **可能问题**：
    - ❌ 避免脏读
    - ✅ 可能出现不可重复读、幻读。
- **适用场景**：Oracle、SQL Server 默认隔离级别。
- **SQL 语法**：
    ```mysql
    SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
    ```

### **4.3 可重复读（Repeatable Read）**

- **特点**：
    - 确保**同一事务内，多次读取相同数据，结果一致**。
    - 但**无法防止幻读**。
- **可能问题**：
    - ❌ 避免脏读、不可重复读。
    - ✅ 可能发生幻读。
- **适用场景**：MySQL 默认隔离级别。
- **SQL 语法**：
    ```mysql
    SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
    ```

### **4.4 可串行化（Serializable）**
- **特点**：
    - **最高级别的隔离性**，事务严格串行执行。
    - 但是**性能最差**，适用于高一致性要求的场景。
    - 
- **可能问题**：
    - ❌ 避免脏读、不可重复读、幻读。
- **适用场景**：银行交易等高一致性需求的系统。
- **SQL 语法**：
```mysql
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
```